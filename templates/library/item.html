{% extends "index_with_back.html" %}

{% block content %}

<div class="text-center">
    <img src="/image/{{ word.image_name }}" class="rounded" width="30%" height="40%">
</div>

<h1 class="text-center">{{ word.word }}</h1>
<p class="text" style="word">{{ word.description }}</p>

<div class="d-flex flex-row-reverse">
    {% if is_admin and is_propose %}
    <button type="button" class="btn btn-success mx-1" onclick="approve()">Одобрить</button>
    <button type="button" class="btn btn-danger mx-1" onclick="decline()">Отказать</button>
    {% endif %}
    {% if is_admin and not is_propose %}
    <a href="/remove/{{ word.id }}" class="btn btn-danger mx-1" role="button">Удалить</a>
    <a href="/edit_item/{{ word.id }}" class="btn btn-warning mx-1" role="button">Редактировать</a>
    {% endif %}
</div>

<script>
    function approve() {
        fetch('/approve_word', {
            method: 'post',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                "word_id": {{ word.id}},
                "approve": 1
            })
        });
        window.location.reload();
    }

    function decline() {
        fetch('/approve_word', {
            method: 'post',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                "word_id": {{ word.id}},
                "approve": 0
            })
        });
        window.location.reload();
    }
</script>

{% endblock %}